{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, vModelSelect as _vModelSelect, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"body\"\n};\nconst _hoisted_2 = {\n  id: \"digital-human-container\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n  class: \"digital-human-controls\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  id: \"app\",\n  class: \"container\"\n};\nconst _hoisted_8 = {\n  class: \"chat-container\"\n};\nconst _hoisted_9 = {\n  class: \"learncard\",\n  id: \"chatHistory\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"message-ai-container\"\n};\nconst _hoisted_11 = [\"innerHTML\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  key: 1,\n  class: \"message user\"\n};\nconst _hoisted_15 = {\n  class: \"message-container\"\n};\nconst _hoisted_16 = {\n  class: \"message-content\"\n};\nconst _hoisted_17 = {\n  class: \"form-container\"\n};\nconst _hoisted_18 = [\"src\"];\nconst _hoisted_19 = {\n  class: \"setting-item\"\n};\nconst _hoisted_20 = {\n  class: \"setting-item\"\n};\nconst _hoisted_21 = {\n  class: \"setting-item\"\n};\nconst _hoisted_22 = {\n  class: \"setting-item\"\n};\nconst _hoisted_23 = {\n  class: \"setting-item\"\n};\nconst _hoisted_24 = {\n  class: \"setting-item\"\n};\nconst _hoisted_25 = {\n  class: \"setting-item\"\n};\nconst _hoisted_26 = {\n  class: \"control-buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavbarPage = _resolveComponent(\"NavbarPage\");\n  const _component_AudioRecorder = _resolveComponent(\"AudioRecorder\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_NavbarPage), _cache[38] || (_cache[38] = _createElementVNode(\"div\", {\n    class: \"welcome-banner\"\n  }, \" 欢迎向诗小语提问诗词相关的内容吧！ \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"iframe\", {\n    id: \"digitalHuman\",\n    src: $setup.digitalHumanSrc,\n    frameborder: \"0\",\n    allow: \"autoplay\"\n  }, null, 8 /* PROPS */, _hoisted_3), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    class: \"icon-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.togglePlay && $setup.togglePlay(...args))\n  }, [_createElementVNode(\"img\", {\n    src: $setup.isPlaying ? require('@/assets/image/stop-icon.png') : require('@/assets/image/play_icon.png'),\n    alt: \"播放/停止\"\n  }, null, 8 /* PROPS */, _hoisted_5)]), _createElementVNode(\"button\", {\n    class: \"icon-button\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.toggleSettings && $setup.toggleSettings(...args))\n  }, [_createElementVNode(\"img\", {\n    src: require('@/assets/image/setting-icon.png'),\n    alt: \"设置\"\n  }, null, 8 /* PROPS */, _hoisted_6)])])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.messages, (message, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['message', message.type])\n    }, [message.type === 'ai' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", {\n      class: \"ai-content\",\n      innerHTML: message.content\n    }, null, 8 /* PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n      class: \"play-button\",\n      onClick: $event => $setup.playMessage(message)\n    }, [_createElementVNode(\"img\", {\n      src: require('@/assets/image/play_icon.png'),\n      alt: \"播放\"\n    }, null, 8 /* PROPS */, _hoisted_13)], 8 /* PROPS */, _hoisted_12)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, _toDisplayString(message.content), 1 /* TEXT */)])]))], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_17, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.userInput = $event),\n    class: \"form-control\",\n    placeholder: \"向诗小语提问吧！\",\n    onKeyup: _cache[3] || (_cache[3] = _withKeys((...args) => $setup.sendMessage && $setup.sendMessage(...args), [\"enter\"]))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.userInput]]), _createElementVNode(\"button\", {\n    class: \"icon-button\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.sendMessage && $setup.sendMessage(...args))\n  }, [_createElementVNode(\"img\", {\n    src: require('@/assets/image/send-icon.png'),\n    alt: \"发送\",\n    class: \"button-icon\"\n  }, null, 8 /* PROPS */, _hoisted_18)]), _createVNode(_component_AudioRecorder, {\n    onRecognitionComplete: $setup.handleRecognitionResult\n  }, null, 8 /* PROPS */, [\"onRecognitionComplete\"])])]), _createCommentVNode(\" 设置面板 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"settings-panel\", {\n      hidden: !$setup.showSettings\n    }])\n  }, [_createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $setup.toggleSettings && $setup.toggleSettings(...args)),\n    class: \"close-button\"\n  }, \"×\"), _cache[32] || (_cache[32] = _createElementVNode(\"h3\", null, \"基础设置\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_19, [_cache[21] || (_cache[21] = _createElementVNode(\"label\", null, \"音量\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"range\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.settings.volume = $event),\n    min: \"0\",\n    max: \"100\",\n    onInput: _cache[7] || (_cache[7] = $event => $setup.updateSettings('volume', $event.target.value))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.settings.volume]]), _createElementVNode(\"span\", null, _toDisplayString($setup.settings.volume) + \"%\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_20, [_cache[22] || (_cache[22] = _createElementVNode(\"label\", null, \"语速\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"range\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.settings.speed = $event),\n    min: \"0\",\n    max: \"100\",\n    onInput: _cache[9] || (_cache[9] = $event => $setup.updateSettings('speed', $event.target.value))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.settings.speed]]), _createElementVNode(\"span\", null, _toDisplayString($setup.settings.speed) + \"%\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_21, [_cache[23] || (_cache[23] = _createElementVNode(\"label\", null, \"音调\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"range\",\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $setup.settings.pitch = $event),\n    min: \"0\",\n    max: \"100\",\n    onInput: _cache[11] || (_cache[11] = $event => $setup.updateSettings('pitch', $event.target.value))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.settings.pitch]]), _createElementVNode(\"span\", null, _toDisplayString($setup.settings.pitch) + \"%\", 1 /* TEXT */)]), _cache[33] || (_cache[33] = _createElementVNode(\"h3\", null, \"角色选择\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_22, [_cache[25] || (_cache[25] = _createElementVNode(\"label\", null, \"角色\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = $event => $setup.settings.voice = $event),\n    onChange: _cache[13] || (_cache[13] = $event => $setup.updateSettings('voice', $event.target.value))\n  }, _cache[24] || (_cache[24] = [_createElementVNode(\"option\", {\n    value: \"aixia\"\n  }, \"爱夏-默认\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"chengcheng-neutral-plus\"\n  }, \"橙橙-知性\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"shasha-neutral-plus\"\n  }, \"莎莎-亲和\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"xiaodi-plus\"\n  }, \"晓迪-温柔\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.settings.voice]])]), _cache[34] || (_cache[34] = _createElementVNode(\"h3\", null, \"表情设置\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_23, [_cache[27] || (_cache[27] = _createElementVNode(\"label\", null, \"情绪\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = $event => $setup.settings.faceEmotion = $event),\n    onChange: _cache[15] || (_cache[15] = $event => $setup.updateSettings('faceEmotion', $event.target.value))\n  }, _cache[26] || (_cache[26] = [_createStaticVNode(\"<option value=\\\"0\\\" data-v-4445d687>综合</option><option value=\\\"1\\\" data-v-4445d687>高兴</option><option value=\\\"2\\\" data-v-4445d687>悲伤</option><option value=\\\"3\\\" data-v-4445d687>生气</option><option value=\\\"4\\\" data-v-4445d687>惊讶</option><option value=\\\"5\\\" data-v-4445d687>中立</option>\", 6)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.settings.faceEmotion]])]), _cache[35] || (_cache[35] = _createElementVNode(\"h3\", null, \"动作设置\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_24, [_cache[29] || (_cache[29] = _createElementVNode(\"label\", null, \"风格\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = $event => $setup.settings.motionStyle = $event),\n    onChange: _cache[17] || (_cache[17] = $event => $setup.updateSettings('motionStyle', $event.target.value))\n  }, _cache[28] || (_cache[28] = [_createStaticVNode(\"<option value=\\\"1\\\" data-v-4445d687>自然闲聊</option><option value=\\\"2\\\" data-v-4445d687>通用演讲</option><option value=\\\"3\\\" data-v-4445d687>通用讲解</option><option value=\\\"4\\\" data-v-4445d687>丰富演讲</option><option value=\\\"5\\\" data-v-4445d687>金姐演讲</option><option value=\\\"6\\\" data-v-4445d687>可爱女生</option><option value=\\\"7\\\" data-v-4445d687>站立直播</option><option value=\\\"8\\\" data-v-4445d687>标准客服</option><option value=\\\"10\\\" data-v-4445d687>主持人风格</option>\", 9)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.settings.motionStyle]])]), _cache[36] || (_cache[36] = _createElementVNode(\"h3\", null, \"形象设置\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_25, [_cache[31] || (_cache[31] = _createElementVNode(\"label\", null, \"形象\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[18] || (_cache[18] = $event => $setup.settings.character = $event),\n    onChange: _cache[19] || (_cache[19] = $event => $setup.updateSettings('character', $event.target.value))\n  }, _cache[30] || (_cache[30] = [_createElementVNode(\"option\", {\n    value: \"default\"\n  }, \"默认数字人\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"tiger\"\n  }, \"小老虎\", -1 /* HOISTED */)]), 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelSelect, $setup.settings.character]])]), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"button\", {\n    onClick: _cache[20] || (_cache[20] = (...args) => $setup.resetSettings && $setup.resetSettings(...args)),\n    class: \"control-btn\"\n  }, \"重置设置\")])], 2 /* CLASS */), _createCommentVNode(\" 加载提示 \"), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"loading-overlay\", {\n      hidden: !$setup.loading\n    }])\n  }, _cache[37] || (_cache[37] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1 /* HOISTED */), _createElementVNode(\"div\", {\n    class: \"loading-text\"\n  }, \"角色加载中...\", -1 /* HOISTED */)]), 2 /* CLASS */)]);\n}","map":{"version":3,"names":["class","id","key","_createElementBlock","_hoisted_1","_createVNode","_component_NavbarPage","_createElementVNode","_hoisted_2","src","$setup","digitalHumanSrc","frameborder","allow","_hoisted_3","_hoisted_4","onClick","_cache","args","togglePlay","isPlaying","require","alt","_hoisted_5","toggleSettings","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","messages","message","index","_normalizeClass","type","_hoisted_10","innerHTML","content","_hoisted_11","$event","playMessage","_hoisted_13","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_toDisplayString","_hoisted_17","userInput","placeholder","onKeyup","_withKeys","sendMessage","_hoisted_18","_component_AudioRecorder","onRecognitionComplete","handleRecognitionResult","_createCommentVNode","hidden","showSettings","_hoisted_19","settings","volume","min","max","onInput","updateSettings","target","value","_hoisted_20","speed","_hoisted_21","pitch","_hoisted_22","voice","onChange","_hoisted_23","faceEmotion","_createStaticVNode","_hoisted_24","motionStyle","_hoisted_25","character","_hoisted_26","resetSettings","loading"],"sources":["D:\\HCI_FINAL\\new_copy\\frontend\\src\\components\\LearnMode.vue"],"sourcesContent":["<template>\n  <div class=\"body\">\n    <NavbarPage />\n\n    <div class=\"welcome-banner\">\n       欢迎向诗小语提问诗词相关的内容吧！\n    </div>\n\n    <div id=\"digital-human-container\">\n      <iframe\n        id=\"digitalHuman\"\n        :src=\"digitalHumanSrc\"\n        frameborder=\"0\"\n        allow=\"autoplay\">\n      </iframe>\n      <div class=\"digital-human-controls\">\n        <button class=\"icon-button\" @click=\"togglePlay\">\n          <img :src=\"isPlaying ? require('@/assets/image/stop-icon.png') : require('@/assets/image/play_icon.png')\" alt=\"播放/停止\">\n        </button>\n        <button class=\"icon-button\" @click=\"toggleSettings\">\n          <img :src=\"require('@/assets/image/setting-icon.png')\" alt=\"设置\">\n        </button>\n      </div>\n    </div>\n\n    <div id=\"app\" class=\"container\">\n      <div class=\"chat-container\">\n        <div class=\"learncard\" id=\"chatHistory\">\n          <div v-for=\"(message, index) in messages\" :key=\"index\" :class=\"['message', message.type]\">\n            <div v-if=\"message.type === 'ai'\" class=\"message-ai-container\">\n              <div class=\"ai-content\" v-html=\"message.content\"></div>\n              <button class=\"play-button\" @click=\"playMessage(message)\">\n                <img :src=\"require('@/assets/image/play_icon.png')\" alt=\"播放\">\n              </button>\n            </div>\n            <div v-else class=\"message user\">\n              <div class=\"message-container\">\n                <div class=\"message-content\">{{ message.content }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"form-container\">\n        <input type=\"text\" v-model=\"userInput\" class=\"form-control\" \n               placeholder=\"向诗小语提问吧！\" @keyup.enter=\"sendMessage\">\n        <button class=\"icon-button\" @click=\"sendMessage\">\n          <img :src=\"require('@/assets/image/send-icon.png')\" alt=\"发送\" class=\"button-icon\">\n        </button>\n        <AudioRecorder @recognition-complete=\"handleRecognitionResult\" />\n      </div>\n    </div>\n\n    <!-- 设置面板 -->\n    <div class=\"settings-panel\" :class=\"{ hidden: !showSettings }\">\n      <button @click=\"toggleSettings\" class=\"close-button\">×</button>\n      <h3>基础设置</h3>\n      <div class=\"setting-item\">\n        <label>音量</label>\n        <input type=\"range\" v-model=\"settings.volume\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('volume', $event.target.value)\">\n        <span>{{ settings.volume }}%</span>\n      </div>\n      <div class=\"setting-item\">\n        <label>语速</label>\n        <input type=\"range\" v-model=\"settings.speed\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('speed', $event.target.value)\">\n        <span>{{ settings.speed }}%</span>\n      </div>\n      <div class=\"setting-item\">\n        <label>音调</label>\n        <input type=\"range\" v-model=\"settings.pitch\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('pitch', $event.target.value)\">\n        <span>{{ settings.pitch }}%</span>\n      </div>\n      \n      <h3>角色选择</h3>\n      <div class=\"setting-item\">\n        <label>角色</label>\n        <select v-model=\"settings.voice\" @change=\"updateSettings('voice', $event.target.value)\">\n          <option value=\"aixia\">爱夏-默认</option>\n          <option value=\"chengcheng-neutral-plus\">橙橙-知性</option>\n          <option value=\"shasha-neutral-plus\">莎莎-亲和</option>\n          <option value=\"xiaodi-plus\">晓迪-温柔</option>\n        </select>\n      </div>\n\n      <h3>表情设置</h3>\n      <div class=\"setting-item\">\n        <label>情绪</label>\n        <select v-model=\"settings.faceEmotion\" @change=\"updateSettings('faceEmotion', $event.target.value)\">\n          <option value=\"0\">综合</option>\n          <option value=\"1\">高兴</option>\n          <option value=\"2\">悲伤</option>\n          <option value=\"3\">生气</option>\n          <option value=\"4\">惊讶</option>\n          <option value=\"5\">中立</option>\n        </select>\n      </div>\n\n      <h3>动作设置</h3>\n      <div class=\"setting-item\">\n        <label>风格</label>\n        <select v-model=\"settings.motionStyle\" @change=\"updateSettings('motionStyle', $event.target.value)\">\n          <option value=\"1\">自然闲聊</option>\n          <option value=\"2\">通用演讲</option>\n          <option value=\"3\">通用讲解</option>\n          <option value=\"4\">丰富演讲</option>\n          <option value=\"5\">金姐演讲</option>\n          <option value=\"6\">可爱女生</option>\n          <option value=\"7\">站立直播</option>\n          <option value=\"8\">标准客服</option>\n          <option value=\"10\">主持人风格</option>\n        </select>\n      </div>\n\n      <h3>形象设置</h3>\n      <div class=\"setting-item\">\n        <label>形象</label>\n        <select v-model=\"settings.character\" @change=\"updateSettings('character', $event.target.value)\">\n          <option value=\"default\">默认数字人</option>\n          <option value=\"tiger\">小老虎</option>\n        </select>\n      </div>\n\n      <div class=\"control-buttons\">\n        <button @click=\"resetSettings\" class=\"control-btn\">重置设置</button>\n      </div>\n    </div>\n\n    <!-- 加载提示 -->\n    <div class=\"loading-overlay\" :class=\"{ hidden: !loading }\">\n      <div class=\"loading-spinner\"></div>\n      <div class=\"loading-text\">角色加载中...</div>\n    </div>\n  </div>\n</template>\n  \n<script>\nimport NavbarPage from './NavbarPage.vue';\nimport AudioRecorder from './AudioRecorder.vue';\nimport { ref, reactive } from 'vue';\n  \nexport default {\n  name: 'LearnMode',\n  components: {\n    NavbarPage,\n    AudioRecorder\n  },\n  setup() {\n    const digitalHumanSrc = ref('https://avatar.deepscience.cn/v3/index.html?code=3lOGvbgeuL+PZWN0scNgwr2UpPyK+x0p0eLEJercNR+BbaJK7blPeGkpSbftayNSjQHrT3IvZsBmwUkz2xMSEAnW/46fo1pbt4QQX6su5UMEvCy/SqlWtL/dWrnSFM8W');\n    const showSettings = ref(false);\n    const loading = ref(false);\n    const isRecording = ref(false);\n    const userInput = ref('');\n    const messages = ref([]);  // 不再初始化一个空的 AI 消息对象\n\n    const streamMessages = ref([]);\n    const settings = reactive({\n      volume: 100,\n      speed: 50,\n      pitch: 50,\n      voice: 'aixia',\n      faceEmotion: '0',\n      motionStyle: '1',\n      character: 'default'\n    });\n\n    const isPlaying = ref(false);\n\n    const toggleSettings = () => {\n      showSettings.value = !showSettings.value;\n    };\n\n    const stopSpeaking = () => {\n      // 实现停止说话的逻辑\n      console.log('停止说话');\n    };\n\n\n    const resetSettings = () => {\n      Object.assign(settings, {\n        volume: 100,\n        speed: 50,\n        pitch: 50,\n        voice: 'aixia',\n        faceEmotion: '0',\n        motionStyle: '1',\n        character: 'default'\n      });\n      // 实现重置设置的逻辑\n      console.log('重置设置');\n    };\n\n    const sendMessage = () => {\n  if (!userInput.value.trim()) {\n    console.log('输入不能为空');\n    return;  // 不发送请求\n  }\n\n  messages.value.push({\n    type: 'user',\n    content: userInput.value\n  });\n\n  // 调用 DeepSeek API\n  startStream(userInput.value);\n  userInput.value = '';  // 清空输入框\n};\n\nconst startStream = (message) => {\n  if (!message.trim()) return;\n\n  const eventSource = new EventSource(`/api/chat/get_and_return?user_input=${encodeURIComponent(message)}`);\n\n  eventSource.onmessage = (event) => {\n    const jsonData = event.data.replace(/^data:\\s*/, '');  // 去掉 \"data: \" 前缀\n    try {\n      const data = JSON.parse(jsonData);  // 解析去除前缀后的 JSON 数据\n      const newContent = data.choices[0].delta.content;  // 提取 content 字段\n      console.log(data);\n      if (newContent) {\n        // 如果没有消息，初始化一条消息\n        if (messages.value.length === 0 || messages.value[messages.value.length - 1].type !== 'ai') {\n          messages.value.push({\n            type: 'ai',\n            content: newContent  // 设置新消息的内容\n          });\n        } else {\n          // 否则，更新最后一条消息的内容\n          messages.value[messages.value.length - 1].content += newContent;\n        }\n      }\n\n      // 检查流是否结束\n      if (data.choices[0].finish_reason === \"stop\") {\n        speak(messages.value[messages.value.length - 1].content);\n        console.log(\"流式数据传输已结束\");\n        eventSource.close();  // 结束流连接\n      }\n      \n      // 强制更新视图\n      messages.value = [...messages.value];  // 通过重新赋值数组引用来触发更新\n    } catch (error) {\n      console.error('JSON 解析错误:', error);\n    }\n  };\n\n  eventSource.onerror = (error) => {\n    console.error('Error in EventSource:', error);\n    eventSource.close();  // 错误时关闭连接\n  };\n};\n\n\n\n   \n    const playMessage = (message) => {\n      // 实现播放消息的逻辑\n      console.log('播放消息:', message);\n    };\n\n    const togglePlay = () => {\n      isPlaying.value = !isPlaying.value;\n      if (isPlaying.value) {\n        // 实现播放逻辑\n        console.log('播放消息');\n      } else {\n        // 实现停止逻辑\n        console.log('停止说话');\n      }\n    };\n\n    const handleRecognitionResult = (text) => {\n      console.log('[LearnMode] 收到识别结果:', text);\n      if (text) {\n        // 方法1: 使用ref直接设置\n        userInput.value = text;\n        console.log('[LearnMode] 已设置输入框值:', userInput.value);\n        \n        // 方法2: 尝试直接操作DOM\n        setTimeout(() => {\n          const input = document.querySelector('.form-container .form-control');\n          if (input) {\n            input.value = text;\n            // 触发input事件以更新v-model\n            input.dispatchEvent(new Event('input'));\n            console.log('[LearnMode] 已通过DOM设置输入框值');\n          }\n        }, 10);\n      }\n    };\n     // 在digitalHuman对象中添加角色配置\nconst characterConfigs = {\n  default: {\n    abName: 'default',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  yunxi: {\n    abName: 'Assets/ABResources/KeFu02/NvKeFu02.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 4,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  majia: {\n    abName: 'Assets/ABResources/Female/Female.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 4,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  xiaomeng: {\n    abName: 'Assets/ABResources/XM01/Prefab/xiaomeng.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'CakeGirlJQJSA',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  tiger: {\n    abName: 'Assets/ABResources/Tiger/Prefab/laohu0113.prefab',\n    voiceName: 'jielidou',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  chuchu: {\n    abName: 'Assets/ABResources/KeFu01/KeFu.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  nvqingnian: {\n    abName: 'Assets/ABResources/girl_metaCloth_rig/girl_metaCloth_rig.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  xiaoke1: {\n    abName: 'Assets/ABResources/KeFu04/Prefab/KeFu-4.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  xiaoke2: {\n    abName: 'Assets/ABResources/NewTV/WeiLaiShaoNV/wlds.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  yisheng: {\n    abName: 'Assets/ABResources/yisheng/yisheng.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  }\n};\n    const updateSettings = (setting, value) => {\n  // 假设 iframe 的 id 是 'digitalHuman'\n  const iframe = document.getElementById('digitalHuman');\n  if (!iframe || !iframe.contentWindow) return;\n\n  switch (setting) {\n    case 'volume':\n      iframe.contentWindow.postMessage({ \n        type: 'AudioVolume', \n        data: value / 100 \n      }, '*');\n      break;\n    case 'speed':\n      iframe.contentWindow.postMessage({ \n        type: 'VoiceSpeed', \n        data: value \n      }, '*');\n      break;\n    case 'pitch':\n      iframe.contentWindow.postMessage({ \n        type: 'VoiceFM', \n        data: value \n      }, '*');\n      break;\n    case 'voice':\n      iframe.contentWindow.postMessage({\n        type: 'VoiceName',\n        data: value\n      }, '*');\n      break;\n    case 'faceEmotion':\n      iframe.contentWindow.postMessage({\n        type: 'FaceEmotion',\n        data: value\n      }, '*');\n      break;\n    case 'motionStyle':\n      iframe.contentWindow.postMessage({\n        type: 'MotionStyle',\n        data: value\n      }, '*');\n      break;\n    case 'character':{\n    const config = characterConfigs[value];\n    console.log(config,value);\n      iframe.contentWindow.postMessage({\n        type: 'ChangeCharacter',\n        data:  config.abName\n      }, '*');\n      break;\n    }\n    case 'body_fixed_hips':\n      iframe.contentWindow.postMessage({\n        type: 'BodyFixedHips',\n        data: value\n      }, '*');\n      break;\n    case 'faceType':\n      iframe.contentWindow.postMessage({\n        type: 'FaceType',\n        data: value\n      }, '*');\n      break;\n    // 可以根据需要添加更多设置项\n  }\n};\n\n\nconst speak = (text) => {\n  const iframe = document.getElementById('digitalHuman');\n  if (!iframe || !iframe.contentWindow) return;\nconsole.log(\"开始说话\");\n  // 假设需要将文本发送到数字人\n  iframe.contentWindow.postMessage({\n    type: 'TextBroadcast',\n    data: text,\n    body_motion: settings.motionStyle,\n      face_type: 1,\n      face_tag: settings.faceEmotion,\n      voice_name: settings.voice,\n      is_first: false\n    // 其他可能的参数，如声音设置\n  }, '*');\n};\n\n\n    return {\n      digitalHumanSrc,\n      showSettings,\n      loading,\n      isRecording,\n      userInput,\n      messages,\n      streamMessages,\n      settings,\n      toggleSettings,\n      stopSpeaking,\n      updateSettings,\n      resetSettings,\n      sendMessage,\n      playMessage,\n      isPlaying,\n      togglePlay,\n            handleRecognitionResult\n    };\n  }\n};\n</script>\n\n<style scoped>\n.body {\n  font-family: \"宋体\", sans-serif;\n  background-color: #f8f4e9;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-image: url('../assets/image/he.gif');\n  background-size: cover;\n  background-position: center;\n  color: #333;\n  background-repeat: repeat;\n  min-height: 100vh;\n  width: 100%;\n}\n\n.markdown-body {\n  font-family: \"Microsoft YaHei\", \"微软雅黑\", sans-serif;\n  padding: 15px;\n  line-height: 1.6;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  background-color: #f9f9f9;\n}\n\n#digital-human-container {\n  width: 30%;\n  height: calc(100vh - 60px);\n  position: fixed;\n  left: 0;\n  top: 60px;\n  background: transparent;\n  display: flex;\n  flex-direction: column;\n  margin-right: 5%;\n}\n\n#digitalHuman {\n  width: 100%;\n  height: calc(100% - 80px);\n  background: transparent;\n}\n\n#app {\n  width: 65%;\n  height: calc(100vh - 60px);\n  position: fixed;\n  right: 0;\n  top: 60px;\n  padding: 20px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-x: hidden;\n}\n\n.chat-container {\n  position: fixed;\n  top: 20vh;  /* 从300px改为120px，更靠近顶部 */\n  left: 50%;\n  transform: translateX(-50%);\n  width: 90%;\n  max-width: 900px;\n  height: 60vh;  /* 动态计算高度，留出顶部和底部空间 */\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 15px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n  margin: 0;\n  overflow-y: hidden;\n  overflow-x: hidden;\n}\n\n.learncard {\n  height: 100%;\n  overflow-y:auto;  /* 改为auto，允许滚动 */\n  padding: 10px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  margin-bottom: 60px;  /* 添加底部边距，防止最后的消息被输入框遮挡 */\n}\n\n.learncard::-webkit-scrollbar {\n  width: 8px;\n}\n\n.learncard::-webkit-scrollbar-track {\n  background: rgba(241, 241, 241, 0.5);\n  border-radius: 4px;\n}\n\n.learncard::-webkit-scrollbar-thumb {\n  background: linear-gradient(to bottom, #D4AF37, #B8960C);\n  border-radius: 4px;\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.learncard::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(to bottom, #B8960C, #9A7B0A);\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.form-container {\n  position: fixed;\n  bottom: 30px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 90%;\n  max-width: 800px;\n  background-color: #fff;\n  border-radius: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  padding: 15px 25px;\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  z-index: 100;\n}\n\n.form-control {\n  flex: 1;\n  height: 40px;\n  padding: 0 20px;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 20px;\n  font-size: 15px;\n  outline: none;\n  background-color: rgba(255, 255, 255, 0.9);\n  transition: all 0.3s ease;\n}\n\n.form-control:focus {\n  border-color: #D4AF37;\n  background-color: #fff;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.icon-button {\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background: none;\n  border: none;\n  padding: 8px;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n}\n\n.icon-button:hover {\n  transform: scale(1.1);\n  background: rgba(212, 175, 55, 0.1);\n}\n\n.icon-button img {\n  width: 24px;\n  height: 24px;\n  object-fit: contain;\n}\n\n.play-button {\n  display: none;\n}\n\n.digital-human-controls {\n  position: relative;\n  bottom: auto;\n  right: auto;\n  margin: 10px auto;\n  display: flex;\n  gap: 12px;\n  padding: 8px 15px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 25px;\n  backdrop-filter: blur(5px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  z-index: 100;\n}\n\n.digital-human-controls .icon-button {\n  width: 42px;\n  height: 42px;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.digital-human-controls .icon-button:hover {\n  background: rgba(212, 175, 55, 0.1);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.digital-human-controls .icon-button img {\n  width: 22px;\n  height: 22px;\n}\n\n.message {\n  display: flex;\n  max-width: 100%;\n  margin: 8px 0;\n  animation: messageFloat 0.5s ease-out;\n  /* 添加浮动效果 */\n}\n\n@keyframes messageFloat {\n  0% {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message-container {\n  display: flex;\n  justify-content: center;\n  /* 水平居中 */\n  align-items: center;\n  /* 垂直居中 */\n  width: 100%;\n  /* 容器宽度 */\n  margin: 10px 0;\n  /* 上下间距 */\n}\n\n.message-content {\n  padding: 12px 20px;\n  border-radius: 15px;\n  font-size: 18px;\n  line-height: 1.5;\n  word-break: break-word;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  /* 用户消息背景 */\n  color: white;\n  /* 字体颜色 */\n}\n\n.ai-content {\n  padding: 12px 20px;\n  border-radius: 15px;\n  font-size: 18px;\n  line-height: 1.5;\n  word-break: break-word;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%);\n  color: #614124;\n  border: 1px solid rgba(139, 69, 19, 0.2);\n  border-bottom-left-radius: 5px;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  position: relative;\n  padding-left: 35px;\n}\n\n.ai-content::before {\n  content: '诗';\n  position: absolute;\n  left: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #8B4513;\n  font-size: 20px;\n  font-weight: bold;\n  opacity: 0.6;\n}\n\n/* 移除扭动动画 */\n@keyframes aiWave {\n  0%, 100% {\n    transform: translateY(0);\n  }\n}\n\n.message.ai {\n  margin-right: auto;\n  justify-content: flex-start;\n}\n\n.message.ai .ai-content:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  transform: translateY(-2px);\n  transition: all 0.3s ease;\n}\n\n.message.user {\n  margin-left: auto;\n  justify-content: flex-end;\n}\n\n.message.user .message-content {\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  color: white;\n  border-bottom-right-radius: 5px;\n  font-family: \"宋体\", sans-serif;\n  transform-origin: right bottom;\n  animation: userFloat 0.3s ease-out;\n}\n\n@keyframes userFloat {\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message.user .message-content:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.settings-panel {\n  position: absolute;\n  left: 20px;\n  bottom: 100px;\n  width: 320px;\n  background: rgba(255, 255, 255, 0.98);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(212, 175, 55, 0.15);\n}\n\n.settings-panel h3 {\n  color: #333;\n  font-size: 16px;\n  margin: 15px 0 10px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(212, 175, 55, 0.2);\n  position: relative;\n}\n\n.settings-panel h3:first-child {\n  margin-top: 0;\n}\n\n.settings-panel h3::after {\n  content: '';\n  position: absolute;\n  bottom: -1px;\n  left: 0;\n  width: 50px;\n  height: 2px;\n  background: linear-gradient(90deg, #D4AF37, transparent);\n}\n\n.setting-item {\n  margin: 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px;\n  border-radius: 8px;\n  transition: background-color 0.3s;\n}\n\n.setting-item:hover {\n  background: rgba(212, 175, 55, 0.05);\n}\n\n.setting-item label {\n  width: 45px;\n  font-size: 14px;\n  color: #666;\n}\n\n.setting-item input[type=\"range\"] {\n  flex: 1;\n  height: 4px;\n  background: #e0e0e0;\n  border-radius: 2px;\n  -webkit-appearance: none;\n  cursor: pointer;\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 12px;\n  height: 12px;\n  background: #D4AF37;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb:focus {\n  outline: none;\n  border-color: #D4AF37;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.setting-item select {\n  flex: 1;\n  padding: 6px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 14px;\n  color: #333;\n  background: #fff;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.setting-item select:hover {\n  border-color: #D4AF37;\n}\n\n.setting-item select:focus {\n  outline: none;\n  border-color: #D4AF37;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.setting-item span {\n  min-width: 40px;\n  text-align: right;\n  font-size: 13px;\n  color: #666;\n}\n\n.control-buttons {\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(212, 175, 55, 0.1);\n  display: flex;\n  gap: 10px;\n}\n\n.control-btn {\n  flex: 1;\n  padding: 8px 15px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  color: white;\n  box-shadow: 0 2px 6px rgba(212, 175, 55, 0.2);\n}\n\n.control-btn:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(212, 175, 55, 0.3);\n}\n\n.message-ai-container {\n  width: 100%;\n  margin-right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n\n.close-button {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: none;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  color: #333;\n  transition: color 0.3s ease;\n}\n\n.close-button:hover {\n  color: #D4AF37;\n}\n\n@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500&display=swap');\n\n.welcome-banner {\n  background: linear-gradient(to bottom, #fdf6e3, #f4e9d8);\n  /* 仿古纸渐变背景 */\n  color: #5b3a29;\n  /* 深棕色字体 */\n  font-size: 20px;\n  font-family: 'Noto Serif SC', serif;\n  /* 采用宋体或楷书风格 */\n  font-weight: bold;\n  text-align: center;\n  padding: 15px 30px;\n  margin: 20px auto;\n  max-width: 600px;\n  border: 4px solid #c4a484;\n  /* 仿竹简边框 */\n  border-radius: 10px;\n  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.15);\n  /* 轻微阴影 */\n  position: relative;\n}\n\n.welcome-banner::before,\n.welcome-banner::after {\n  content: \"\";\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background-color: #c4a484;\n  border-radius: 50%;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.welcome-banner::before {\n  left: -20px;\n}\n\n.welcome-banner::after {\n  right: -20px;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  backdrop-filter: blur(5px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 5px solid #f3f3f3;\n  border-top: 5px solid #D4AF37;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.hidden {\n  display: none !important;\n}\n\n@keyframes recording-pulse {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.2);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n\n.recording {\n  animation: recording-pulse 1s infinite;\n  filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(330deg) !important;\n}\n\n:deep(.welcome-message) {\n  margin: 60px auto;\n  width: 90%;\n  max-width: 900px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n:deep(.welcome-inner) {\n  background: linear-gradient(135deg, rgba(255, 250, 240, 0.98), rgba(252, 248, 240, 0.95));\n  border-radius: 16px;\n  padding: 40px 50px;\n  text-align: center;\n  width: 100%;\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(212, 175, 55, 0.25);\n  position: relative;\n  overflow: auto;\n}\n\n:deep(.welcome-inner::before) {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.8), transparent);\n}\n\n:deep(.welcome-title) {\n  font-size: 46px;\n  color: #B8860B;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  font-weight: bold;\n  letter-spacing: 8px;\n  margin-bottom: 20px;\n  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);\n  animation: fadeInDown 1.2s ease-out;\n  text-align: center;\n}\n\n:deep(.welcome-subtitle) {\n  font-size: 24px;\n  color: #D4AF37;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  letter-spacing: 5px;\n  margin-bottom: 30px;\n  opacity: 0.9;\n  animation: fadeInUp 1.2s ease-out 0.3s both;\n  text-align: center;\n}\n\n:deep(.welcome-content) {\n  font-size: 28px;\n  color: #8B4513;\n  line-height: 1.6;\n  margin: 30px 0;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  animation: fadeIn 1.2s ease-out 0.6s both;\n  text-align: center;\n  display: block;\n  width: 100%;\n}\n\n:deep(.quote-left),\n:deep(.quote-right) {\n  color: #D4AF37;\n  font-size: 24px;\n  vertical-align: middle;\n  margin: 0 4px;\n  opacity: 0.8;\n}\n\n:deep(.welcome-decoration) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 20px;\n  color: #D4AF37;\n  animation: fadeIn 1.2s ease-out 0.9s both;\n}\n\n:deep(.welcome-decoration .line) {\n  font-size: 12px;\n  opacity: 0.5;\n}\n\n:deep(.welcome-decoration .flower) {\n  font-size: 18px;\n  opacity: 0.9;\n  animation: float 3s ease-in-out infinite;\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  to {\n    opacity: 0.9;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes float {\n\n  0%,\n  100% {\n    transform: translateY(0);\n  }\n\n  50% {\n    transform: translateY(-6px);\n  }\n}\n\n/* 滚动条样式优化 */\n.chat-container::-webkit-scrollbar {\n  width: 8px;\n}\n\n.chat-container::-webkit-scrollbar-track {\n  background: rgba(241, 241, 241, 0.5);\n  border-radius: 4px;\n}\n\n.chat-container::-webkit-scrollbar-thumb {\n  background: linear-gradient(to bottom, #D4AF37, #B8960C);\n  border-radius: 4px;\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.chat-container::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(to bottom, #B8960C, #9A7B0A);\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
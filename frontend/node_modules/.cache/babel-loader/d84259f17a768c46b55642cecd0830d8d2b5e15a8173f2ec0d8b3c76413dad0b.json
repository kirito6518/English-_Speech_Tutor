{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavbarPage from './NavbarPage.vue';\nimport AudioRecorder from './AudioRecorder.vue';\nimport { ref, reactive } from 'vue';\nexport default {\n  name: 'LearnMode',\n  components: {\n    NavbarPage,\n    AudioRecorder\n  },\n  setup() {\n    const digitalHumanSrc = ref('https://avatar.deepscience.cn/v3/index.html?code=3lOGvbgeuL+PZWN0scNgwr2UpPyK+x0p0eLEJercNR+BbaJK7blPeGkpSbftayNSjQHrT3IvZsBmwUkz2xMSEAnW/46fo1pbt4QQX6su5UMEvCy/SqlWtL/dWrnSFM8W');\n    const showSettings = ref(false);\n    const loading = ref(false);\n    const isRecording = ref(false);\n    const userInput = ref('');\n    const messages = ref([]); // 不再初始化一个空的 AI 消息对象\n\n    const streamMessages = ref([]);\n    const settings = reactive({\n      volume: 100,\n      speed: 50,\n      pitch: 50,\n      voice: 'aixia',\n      faceEmotion: '0',\n      motionStyle: '1',\n      character: 'default'\n    });\n    const isPlaying = ref(false);\n    const toggleSettings = () => {\n      showSettings.value = !showSettings.value;\n    };\n    const stopSpeaking = () => {\n      // 实现停止说话的逻辑\n      console.log('停止说话');\n    };\n    const resetSettings = () => {\n      Object.assign(settings, {\n        volume: 100,\n        speed: 50,\n        pitch: 50,\n        voice: 'aixia',\n        faceEmotion: '0',\n        motionStyle: '1',\n        character: 'default'\n      });\n      // 实现重置设置的逻辑\n      console.log('重置设置');\n    };\n    const sendMessage = () => {\n      if (!userInput.value.trim()) {\n        console.log('输入不能为空');\n        return; // 不发送请求\n      }\n      messages.value.push({\n        type: 'user',\n        content: userInput.value\n      });\n\n      // 调用 DeepSeek API\n      startStream(userInput.value);\n      userInput.value = ''; // 清空输入框\n    };\n    const startStream = message => {\n      if (!message.trim()) return;\n      const eventSource = new EventSource(`/api/chat/get_and_return?user_input=${encodeURIComponent(message)}`);\n      eventSource.onmessage = event => {\n        const jsonData = event.data.replace(/^data:\\s*/, ''); // 去掉 \"data: \" 前缀\n        try {\n          const data = JSON.parse(jsonData); // 解析去除前缀后的 JSON 数据\n          const newContent = data.choices[0].delta.content; // 提取 content 字段\n          console.log(data);\n          if (newContent) {\n            // 如果没有消息，初始化一条消息\n            if (messages.value.length === 0 || messages.value[messages.value.length - 1].type !== 'ai') {\n              messages.value.push({\n                type: 'ai',\n                content: newContent // 设置新消息的内容\n              });\n            } else {\n              // 否则，更新最后一条消息的内容\n              messages.value[messages.value.length - 1].content += newContent;\n            }\n          }\n\n          // 检查流是否结束\n          if (data.choices[0].finish_reason === \"stop\") {\n            speak(messages.value[messages.value.length - 1].content);\n            console.log(\"流式数据传输已结束\");\n            eventSource.close(); // 结束流连接\n          }\n\n          // 强制更新视图\n          messages.value = [...messages.value]; // 通过重新赋值数组引用来触发更新\n        } catch (error) {\n          console.error('JSON 解析错误:', error);\n        }\n      };\n      eventSource.onerror = error => {\n        console.error('Error in EventSource:', error);\n        eventSource.close(); // 错误时关闭连接\n      };\n    };\n    const playMessage = message => {\n      // 实现播放消息的逻辑\n      console.log('播放消息:', message);\n    };\n    const togglePlay = () => {\n      isPlaying.value = !isPlaying.value;\n      if (isPlaying.value) {\n        // 实现播放逻辑\n        console.log('播放消息');\n      } else {\n        // 实现停止逻辑\n        console.log('停止说话');\n      }\n    };\n    const handleRecognitionResult = text => {\n      console.log('[LearnMode] 收到识别结果:', text);\n      if (text) {\n        // 方法1: 使用ref直接设置\n        userInput.value = text;\n        console.log('[LearnMode] 已设置输入框值:', userInput.value);\n\n        // 方法2: 尝试直接操作DOM\n        setTimeout(() => {\n          const input = document.querySelector('.form-container .form-control');\n          if (input) {\n            input.value = text;\n            // 触发input事件以更新v-model\n            input.dispatchEvent(new Event('input'));\n            console.log('[LearnMode] 已通过DOM设置输入框值');\n          }\n        }, 10);\n      }\n    };\n    // 在digitalHuman对象中添加角色配置\n    const characterConfigs = {\n      default: {\n        abName: 'default',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      yunxi: {\n        abName: 'Assets/ABResources/KeFu02/NvKeFu02.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 4,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      majia: {\n        abName: 'Assets/ABResources/Female/Female.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 4,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      xiaomeng: {\n        abName: 'Assets/ABResources/XM01/Prefab/xiaomeng.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'CakeGirlJQJSA',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      tiger: {\n        abName: 'Assets/ABResources/Tiger/Prefab/laohu0113.prefab',\n        voiceName: 'jielidou',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 3,\n        head_x_rot: -10\n      },\n      chuchu: {\n        abName: 'Assets/ABResources/KeFu01/KeFu.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 3,\n        head_x_rot: -10\n      },\n      nvqingnian: {\n        abName: 'Assets/ABResources/girl_metaCloth_rig/girl_metaCloth_rig.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 3,\n        head_x_rot: -10\n      },\n      xiaoke1: {\n        abName: 'Assets/ABResources/KeFu04/Prefab/KeFu-4.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      xiaoke2: {\n        abName: 'Assets/ABResources/NewTV/WeiLaiShaoNV/wlds.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      },\n      yisheng: {\n        abName: 'Assets/ABResources/yisheng/yisheng.prefab',\n        voiceName: 'aixia',\n        bodyMotion: 1,\n        styleTag: 'Kefu',\n        bsRatio: 1.5,\n        head_x_rot: -10\n      }\n    };\n    const updateSettings = (setting, value) => {\n      // 假设 iframe 的 id 是 'digitalHuman'\n      const iframe = document.getElementById('digitalHuman');\n      if (!iframe || !iframe.contentWindow) return;\n      switch (setting) {\n        case 'volume':\n          iframe.contentWindow.postMessage({\n            type: 'AudioVolume',\n            data: value / 100\n          }, '*');\n          break;\n        case 'speed':\n          iframe.contentWindow.postMessage({\n            type: 'VoiceSpeed',\n            data: value\n          }, '*');\n          break;\n        case 'pitch':\n          iframe.contentWindow.postMessage({\n            type: 'VoiceFM',\n            data: value\n          }, '*');\n          break;\n        case 'voice':\n          iframe.contentWindow.postMessage({\n            type: 'VoiceName',\n            data: value\n          }, '*');\n          break;\n        case 'faceEmotion':\n          iframe.contentWindow.postMessage({\n            type: 'FaceEmotion',\n            data: value\n          }, '*');\n          break;\n        case 'motionStyle':\n          iframe.contentWindow.postMessage({\n            type: 'MotionStyle',\n            data: value\n          }, '*');\n          break;\n        case 'character':\n          {\n            const config = characterConfigs[value];\n            console.log(config, value);\n            iframe.contentWindow.postMessage({\n              type: 'ChangeCharacter',\n              data: config.abName\n            }, '*');\n            break;\n          }\n        case 'body_fixed_hips':\n          iframe.contentWindow.postMessage({\n            type: 'BodyFixedHips',\n            data: value\n          }, '*');\n          break;\n        case 'faceType':\n          iframe.contentWindow.postMessage({\n            type: 'FaceType',\n            data: value\n          }, '*');\n          break;\n        // 可以根据需要添加更多设置项\n      }\n    };\n    const speak = text => {\n      const iframe = document.getElementById('digitalHuman');\n      if (!iframe || !iframe.contentWindow) return;\n      console.log(\"开始说话\");\n      // 假设需要将文本发送到数字人\n      iframe.contentWindow.postMessage({\n        type: 'TextBroadcast',\n        data: text,\n        body_motion: settings.motionStyle,\n        face_type: 1,\n        face_tag: settings.faceEmotion,\n        voice_name: settings.voice,\n        is_first: false\n        // 其他可能的参数，如声音设置\n      }, '*');\n    };\n    return {\n      digitalHumanSrc,\n      showSettings,\n      loading,\n      isRecording,\n      userInput,\n      messages,\n      streamMessages,\n      settings,\n      toggleSettings,\n      stopSpeaking,\n      updateSettings,\n      resetSettings,\n      sendMessage,\n      playMessage,\n      isPlaying,\n      togglePlay,\n      handleRecognitionResult\n    };\n  }\n};","map":{"version":3,"names":["NavbarPage","AudioRecorder","ref","reactive","name","components","setup","digitalHumanSrc","showSettings","loading","isRecording","userInput","messages","streamMessages","settings","volume","speed","pitch","voice","faceEmotion","motionStyle","character","isPlaying","toggleSettings","value","stopSpeaking","console","log","resetSettings","Object","assign","sendMessage","trim","push","type","content","startStream","message","eventSource","EventSource","encodeURIComponent","onmessage","event","jsonData","data","replace","JSON","parse","newContent","choices","delta","length","finish_reason","speak","close","error","onerror","playMessage","togglePlay","handleRecognitionResult","text","setTimeout","input","document","querySelector","dispatchEvent","Event","characterConfigs","default","abName","voiceName","bodyMotion","styleTag","bsRatio","head_x_rot","yunxi","majia","xiaomeng","tiger","chuchu","nvqingnian","xiaoke1","xiaoke2","yisheng","updateSettings","setting","iframe","getElementById","contentWindow","postMessage","config","body_motion","face_type","face_tag","voice_name","is_first"],"sources":["D:\\HCI_FINAL\\new_copy\\frontend\\src\\components\\LearnMode.vue"],"sourcesContent":["<template>\n  <div class=\"body\">\n    <NavbarPage />\n\n    <div class=\"welcome-banner\">\n       欢迎向诗小语提问诗词相关的内容吧！\n    </div>\n\n    <div id=\"digital-human-container\">\n      <iframe\n        id=\"digitalHuman\"\n        :src=\"digitalHumanSrc\"\n        frameborder=\"0\"\n        allow=\"autoplay\">\n      </iframe>\n      <div class=\"digital-human-controls\">\n        <button class=\"icon-button\" @click=\"togglePlay\">\n          <img :src=\"isPlaying ? require('@/assets/image/stop-icon.png') : require('@/assets/image/play_icon.png')\" alt=\"播放/停止\">\n        </button>\n        <button class=\"icon-button\" @click=\"toggleSettings\">\n          <img :src=\"require('@/assets/image/setting-icon.png')\" alt=\"设置\">\n        </button>\n      </div>\n    </div>\n\n    <div id=\"app\" class=\"container\">\n      <div class=\"chat-container\">\n        <div class=\"learncard\" id=\"chatHistory\">\n          <div v-for=\"(message, index) in messages\" :key=\"index\" :class=\"['message', message.type]\">\n            <div v-if=\"message.type === 'ai'\" class=\"message-ai-container\">\n              <div class=\"ai-content\" v-html=\"message.content\"></div>\n              <button class=\"play-button\" @click=\"playMessage(message)\">\n                <img :src=\"require('@/assets/image/play_icon.png')\" alt=\"播放\">\n              </button>\n            </div>\n            <div v-else class=\"message user\">\n              <div class=\"message-container\">\n                <div class=\"message-content\">{{ message.content }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"form-container\">\n        <input type=\"text\" v-model=\"userInput\" class=\"form-control\" \n               placeholder=\"向诗小语提问吧！\" @keyup.enter=\"sendMessage\">\n        <button class=\"icon-button\" @click=\"sendMessage\">\n          <img :src=\"require('@/assets/image/send-icon.png')\" alt=\"发送\" class=\"button-icon\">\n        </button>\n        <AudioRecorder @recognition-complete=\"handleRecognitionResult\" />\n      </div>\n    </div>\n\n    <!-- 设置面板 -->\n    <div class=\"settings-panel\" :class=\"{ hidden: !showSettings }\">\n      <button @click=\"toggleSettings\" class=\"close-button\">×</button>\n      <h3>基础设置</h3>\n      <div class=\"setting-item\">\n        <label>音量</label>\n        <input type=\"range\" v-model=\"settings.volume\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('volume', $event.target.value)\">\n        <span>{{ settings.volume }}%</span>\n      </div>\n      <div class=\"setting-item\">\n        <label>语速</label>\n        <input type=\"range\" v-model=\"settings.speed\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('speed', $event.target.value)\">\n        <span>{{ settings.speed }}%</span>\n      </div>\n      <div class=\"setting-item\">\n        <label>音调</label>\n        <input type=\"range\" v-model=\"settings.pitch\" min=\"0\" max=\"100\"\n               @input=\"updateSettings('pitch', $event.target.value)\">\n        <span>{{ settings.pitch }}%</span>\n      </div>\n      \n      <h3>角色选择</h3>\n      <div class=\"setting-item\">\n        <label>角色</label>\n        <select v-model=\"settings.voice\" @change=\"updateSettings('voice', $event.target.value)\">\n          <option value=\"aixia\">爱夏-默认</option>\n          <option value=\"chengcheng-neutral-plus\">橙橙-知性</option>\n          <option value=\"shasha-neutral-plus\">莎莎-亲和</option>\n          <option value=\"xiaodi-plus\">晓迪-温柔</option>\n        </select>\n      </div>\n\n      <h3>表情设置</h3>\n      <div class=\"setting-item\">\n        <label>情绪</label>\n        <select v-model=\"settings.faceEmotion\" @change=\"updateSettings('faceEmotion', $event.target.value)\">\n          <option value=\"0\">综合</option>\n          <option value=\"1\">高兴</option>\n          <option value=\"2\">悲伤</option>\n          <option value=\"3\">生气</option>\n          <option value=\"4\">惊讶</option>\n          <option value=\"5\">中立</option>\n        </select>\n      </div>\n\n      <h3>动作设置</h3>\n      <div class=\"setting-item\">\n        <label>风格</label>\n        <select v-model=\"settings.motionStyle\" @change=\"updateSettings('motionStyle', $event.target.value)\">\n          <option value=\"1\">自然闲聊</option>\n          <option value=\"2\">通用演讲</option>\n          <option value=\"3\">通用讲解</option>\n          <option value=\"4\">丰富演讲</option>\n          <option value=\"5\">金姐演讲</option>\n          <option value=\"6\">可爱女生</option>\n          <option value=\"7\">站立直播</option>\n          <option value=\"8\">标准客服</option>\n          <option value=\"10\">主持人风格</option>\n        </select>\n      </div>\n\n      <h3>形象设置</h3>\n      <div class=\"setting-item\">\n        <label>形象</label>\n        <select v-model=\"settings.character\" @change=\"updateSettings('character', $event.target.value)\">\n          <option value=\"default\">默认数字人</option>\n          <option value=\"tiger\">小老虎</option>\n        </select>\n      </div>\n\n      <div class=\"control-buttons\">\n        <button @click=\"resetSettings\" class=\"control-btn\">重置设置</button>\n      </div>\n    </div>\n\n    <!-- 加载提示 -->\n    <div class=\"loading-overlay\" :class=\"{ hidden: !loading }\">\n      <div class=\"loading-spinner\"></div>\n      <div class=\"loading-text\">角色加载中...</div>\n    </div>\n  </div>\n</template>\n  \n<script>\nimport NavbarPage from './NavbarPage.vue';\nimport AudioRecorder from './AudioRecorder.vue';\nimport { ref, reactive } from 'vue';\n  \nexport default {\n  name: 'LearnMode',\n  components: {\n    NavbarPage,\n    AudioRecorder\n  },\n  setup() {\n    const digitalHumanSrc = ref('https://avatar.deepscience.cn/v3/index.html?code=3lOGvbgeuL+PZWN0scNgwr2UpPyK+x0p0eLEJercNR+BbaJK7blPeGkpSbftayNSjQHrT3IvZsBmwUkz2xMSEAnW/46fo1pbt4QQX6su5UMEvCy/SqlWtL/dWrnSFM8W');\n    const showSettings = ref(false);\n    const loading = ref(false);\n    const isRecording = ref(false);\n    const userInput = ref('');\n    const messages = ref([]);  // 不再初始化一个空的 AI 消息对象\n\n    const streamMessages = ref([]);\n    const settings = reactive({\n      volume: 100,\n      speed: 50,\n      pitch: 50,\n      voice: 'aixia',\n      faceEmotion: '0',\n      motionStyle: '1',\n      character: 'default'\n    });\n\n    const isPlaying = ref(false);\n\n    const toggleSettings = () => {\n      showSettings.value = !showSettings.value;\n    };\n\n    const stopSpeaking = () => {\n      // 实现停止说话的逻辑\n      console.log('停止说话');\n    };\n\n\n    const resetSettings = () => {\n      Object.assign(settings, {\n        volume: 100,\n        speed: 50,\n        pitch: 50,\n        voice: 'aixia',\n        faceEmotion: '0',\n        motionStyle: '1',\n        character: 'default'\n      });\n      // 实现重置设置的逻辑\n      console.log('重置设置');\n    };\n\n    const sendMessage = () => {\n  if (!userInput.value.trim()) {\n    console.log('输入不能为空');\n    return;  // 不发送请求\n  }\n\n  messages.value.push({\n    type: 'user',\n    content: userInput.value\n  });\n\n  // 调用 DeepSeek API\n  startStream(userInput.value);\n  userInput.value = '';  // 清空输入框\n};\n\nconst startStream = (message) => {\n  if (!message.trim()) return;\n\n  const eventSource = new EventSource(`/api/chat/get_and_return?user_input=${encodeURIComponent(message)}`);\n\n  eventSource.onmessage = (event) => {\n    const jsonData = event.data.replace(/^data:\\s*/, '');  // 去掉 \"data: \" 前缀\n    try {\n      const data = JSON.parse(jsonData);  // 解析去除前缀后的 JSON 数据\n      const newContent = data.choices[0].delta.content;  // 提取 content 字段\n      console.log(data);\n      if (newContent) {\n        // 如果没有消息，初始化一条消息\n        if (messages.value.length === 0 || messages.value[messages.value.length - 1].type !== 'ai') {\n          messages.value.push({\n            type: 'ai',\n            content: newContent  // 设置新消息的内容\n          });\n        } else {\n          // 否则，更新最后一条消息的内容\n          messages.value[messages.value.length - 1].content += newContent;\n        }\n      }\n\n      // 检查流是否结束\n      if (data.choices[0].finish_reason === \"stop\") {\n        speak(messages.value[messages.value.length - 1].content);\n        console.log(\"流式数据传输已结束\");\n        eventSource.close();  // 结束流连接\n      }\n      \n      // 强制更新视图\n      messages.value = [...messages.value];  // 通过重新赋值数组引用来触发更新\n    } catch (error) {\n      console.error('JSON 解析错误:', error);\n    }\n  };\n\n  eventSource.onerror = (error) => {\n    console.error('Error in EventSource:', error);\n    eventSource.close();  // 错误时关闭连接\n  };\n};\n\n\n\n   \n    const playMessage = (message) => {\n      // 实现播放消息的逻辑\n      console.log('播放消息:', message);\n    };\n\n    const togglePlay = () => {\n      isPlaying.value = !isPlaying.value;\n      if (isPlaying.value) {\n        // 实现播放逻辑\n        console.log('播放消息');\n      } else {\n        // 实现停止逻辑\n        console.log('停止说话');\n      }\n    };\n\n    const handleRecognitionResult = (text) => {\n      console.log('[LearnMode] 收到识别结果:', text);\n      if (text) {\n        // 方法1: 使用ref直接设置\n        userInput.value = text;\n        console.log('[LearnMode] 已设置输入框值:', userInput.value);\n        \n        // 方法2: 尝试直接操作DOM\n        setTimeout(() => {\n          const input = document.querySelector('.form-container .form-control');\n          if (input) {\n            input.value = text;\n            // 触发input事件以更新v-model\n            input.dispatchEvent(new Event('input'));\n            console.log('[LearnMode] 已通过DOM设置输入框值');\n          }\n        }, 10);\n      }\n    };\n     // 在digitalHuman对象中添加角色配置\nconst characterConfigs = {\n  default: {\n    abName: 'default',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  yunxi: {\n    abName: 'Assets/ABResources/KeFu02/NvKeFu02.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 4,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  majia: {\n    abName: 'Assets/ABResources/Female/Female.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 4,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  xiaomeng: {\n    abName: 'Assets/ABResources/XM01/Prefab/xiaomeng.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'CakeGirlJQJSA',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  tiger: {\n    abName: 'Assets/ABResources/Tiger/Prefab/laohu0113.prefab',\n    voiceName: 'jielidou',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  chuchu: {\n    abName: 'Assets/ABResources/KeFu01/KeFu.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  nvqingnian: {\n    abName: 'Assets/ABResources/girl_metaCloth_rig/girl_metaCloth_rig.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 3,\n    head_x_rot: -10\n  },\n  xiaoke1: {\n    abName: 'Assets/ABResources/KeFu04/Prefab/KeFu-4.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  xiaoke2: {\n    abName: 'Assets/ABResources/NewTV/WeiLaiShaoNV/wlds.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  },\n  yisheng: {\n    abName: 'Assets/ABResources/yisheng/yisheng.prefab',\n    voiceName: 'aixia',\n    bodyMotion: 1,\n    styleTag: 'Kefu',\n    bsRatio: 1.5,\n    head_x_rot: -10\n  }\n};\n    const updateSettings = (setting, value) => {\n  // 假设 iframe 的 id 是 'digitalHuman'\n  const iframe = document.getElementById('digitalHuman');\n  if (!iframe || !iframe.contentWindow) return;\n\n  switch (setting) {\n    case 'volume':\n      iframe.contentWindow.postMessage({ \n        type: 'AudioVolume', \n        data: value / 100 \n      }, '*');\n      break;\n    case 'speed':\n      iframe.contentWindow.postMessage({ \n        type: 'VoiceSpeed', \n        data: value \n      }, '*');\n      break;\n    case 'pitch':\n      iframe.contentWindow.postMessage({ \n        type: 'VoiceFM', \n        data: value \n      }, '*');\n      break;\n    case 'voice':\n      iframe.contentWindow.postMessage({\n        type: 'VoiceName',\n        data: value\n      }, '*');\n      break;\n    case 'faceEmotion':\n      iframe.contentWindow.postMessage({\n        type: 'FaceEmotion',\n        data: value\n      }, '*');\n      break;\n    case 'motionStyle':\n      iframe.contentWindow.postMessage({\n        type: 'MotionStyle',\n        data: value\n      }, '*');\n      break;\n    case 'character':{\n    const config = characterConfigs[value];\n    console.log(config,value);\n      iframe.contentWindow.postMessage({\n        type: 'ChangeCharacter',\n        data:  config.abName\n      }, '*');\n      break;\n    }\n    case 'body_fixed_hips':\n      iframe.contentWindow.postMessage({\n        type: 'BodyFixedHips',\n        data: value\n      }, '*');\n      break;\n    case 'faceType':\n      iframe.contentWindow.postMessage({\n        type: 'FaceType',\n        data: value\n      }, '*');\n      break;\n    // 可以根据需要添加更多设置项\n  }\n};\n\n\nconst speak = (text) => {\n  const iframe = document.getElementById('digitalHuman');\n  if (!iframe || !iframe.contentWindow) return;\nconsole.log(\"开始说话\");\n  // 假设需要将文本发送到数字人\n  iframe.contentWindow.postMessage({\n    type: 'TextBroadcast',\n    data: text,\n    body_motion: settings.motionStyle,\n      face_type: 1,\n      face_tag: settings.faceEmotion,\n      voice_name: settings.voice,\n      is_first: false\n    // 其他可能的参数，如声音设置\n  }, '*');\n};\n\n\n    return {\n      digitalHumanSrc,\n      showSettings,\n      loading,\n      isRecording,\n      userInput,\n      messages,\n      streamMessages,\n      settings,\n      toggleSettings,\n      stopSpeaking,\n      updateSettings,\n      resetSettings,\n      sendMessage,\n      playMessage,\n      isPlaying,\n      togglePlay,\n            handleRecognitionResult\n    };\n  }\n};\n</script>\n\n<style scoped>\n.body {\n  font-family: \"宋体\", sans-serif;\n  background-color: #f8f4e9;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-image: url('../assets/image/he.gif');\n  background-size: cover;\n  background-position: center;\n  color: #333;\n  background-repeat: repeat;\n  min-height: 100vh;\n  width: 100%;\n}\n\n.markdown-body {\n  font-family: \"Microsoft YaHei\", \"微软雅黑\", sans-serif;\n  padding: 15px;\n  line-height: 1.6;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  background-color: #f9f9f9;\n}\n\n#digital-human-container {\n  width: 30%;\n  height: calc(100vh - 60px);\n  position: fixed;\n  left: 0;\n  top: 60px;\n  background: transparent;\n  display: flex;\n  flex-direction: column;\n  margin-right: 5%;\n}\n\n#digitalHuman {\n  width: 100%;\n  height: calc(100% - 80px);\n  background: transparent;\n}\n\n#app {\n  width: 65%;\n  height: calc(100vh - 60px);\n  position: fixed;\n  right: 0;\n  top: 60px;\n  padding: 20px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-x: hidden;\n}\n\n.chat-container {\n  position: fixed;\n  top: 20vh;  /* 从300px改为120px，更靠近顶部 */\n  left: 50%;\n  transform: translateX(-50%);\n  width: 90%;\n  max-width: 900px;\n  height: 60vh;  /* 动态计算高度，留出顶部和底部空间 */\n  padding: 20px;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 15px;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);\n  margin: 0;\n  overflow-y: hidden;\n  overflow-x: hidden;\n}\n\n.learncard {\n  height: 100%;\n  overflow-y:auto;  /* 改为auto，允许滚动 */\n  padding: 10px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  margin-bottom: 60px;  /* 添加底部边距，防止最后的消息被输入框遮挡 */\n}\n\n.learncard::-webkit-scrollbar {\n  width: 8px;\n}\n\n.learncard::-webkit-scrollbar-track {\n  background: rgba(241, 241, 241, 0.5);\n  border-radius: 4px;\n}\n\n.learncard::-webkit-scrollbar-thumb {\n  background: linear-gradient(to bottom, #D4AF37, #B8960C);\n  border-radius: 4px;\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.learncard::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(to bottom, #B8960C, #9A7B0A);\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.form-container {\n  position: fixed;\n  bottom: 30px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 90%;\n  max-width: 800px;\n  background-color: #fff;\n  border-radius: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  padding: 15px 25px;\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  z-index: 100;\n}\n\n.form-control {\n  flex: 1;\n  height: 40px;\n  padding: 0 20px;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 20px;\n  font-size: 15px;\n  outline: none;\n  background-color: rgba(255, 255, 255, 0.9);\n  transition: all 0.3s ease;\n}\n\n.form-control:focus {\n  border-color: #D4AF37;\n  background-color: #fff;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.icon-button {\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background: none;\n  border: none;\n  padding: 8px;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n}\n\n.icon-button:hover {\n  transform: scale(1.1);\n  background: rgba(212, 175, 55, 0.1);\n}\n\n.icon-button img {\n  width: 24px;\n  height: 24px;\n  object-fit: contain;\n}\n\n.play-button {\n  display: none;\n}\n\n.digital-human-controls {\n  position: relative;\n  bottom: auto;\n  right: auto;\n  margin: 10px auto;\n  display: flex;\n  gap: 12px;\n  padding: 8px 15px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 25px;\n  backdrop-filter: blur(5px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  z-index: 100;\n}\n\n.digital-human-controls .icon-button {\n  width: 42px;\n  height: 42px;\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 50%;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);\n}\n\n.digital-human-controls .icon-button:hover {\n  background: rgba(212, 175, 55, 0.1);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.digital-human-controls .icon-button img {\n  width: 22px;\n  height: 22px;\n}\n\n.message {\n  display: flex;\n  max-width: 100%;\n  margin: 8px 0;\n  animation: messageFloat 0.5s ease-out;\n  /* 添加浮动效果 */\n}\n\n@keyframes messageFloat {\n  0% {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message-container {\n  display: flex;\n  justify-content: center;\n  /* 水平居中 */\n  align-items: center;\n  /* 垂直居中 */\n  width: 100%;\n  /* 容器宽度 */\n  margin: 10px 0;\n  /* 上下间距 */\n}\n\n.message-content {\n  padding: 12px 20px;\n  border-radius: 15px;\n  font-size: 18px;\n  line-height: 1.5;\n  word-break: break-word;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  /* 用户消息背景 */\n  color: white;\n  /* 字体颜色 */\n}\n\n.ai-content {\n  padding: 12px 20px;\n  border-radius: 15px;\n  font-size: 18px;\n  line-height: 1.5;\n  word-break: break-word;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n  background: linear-gradient(135deg, #ffffff 0%, #f8f8f8 100%);\n  color: #614124;\n  border: 1px solid rgba(139, 69, 19, 0.2);\n  border-bottom-left-radius: 5px;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  position: relative;\n  padding-left: 35px;\n}\n\n.ai-content::before {\n  content: '诗';\n  position: absolute;\n  left: 10px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #8B4513;\n  font-size: 20px;\n  font-weight: bold;\n  opacity: 0.6;\n}\n\n/* 移除扭动动画 */\n@keyframes aiWave {\n  0%, 100% {\n    transform: translateY(0);\n  }\n}\n\n.message.ai {\n  margin-right: auto;\n  justify-content: flex-start;\n}\n\n.message.ai .ai-content:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  transform: translateY(-2px);\n  transition: all 0.3s ease;\n}\n\n.message.user {\n  margin-left: auto;\n  justify-content: flex-end;\n}\n\n.message.user .message-content {\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  color: white;\n  border-bottom-right-radius: 5px;\n  font-family: \"宋体\", sans-serif;\n  transform-origin: right bottom;\n  animation: userFloat 0.3s ease-out;\n}\n\n@keyframes userFloat {\n  0% {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.message.user .message-content:hover {\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.settings-panel {\n  position: absolute;\n  left: 20px;\n  bottom: 100px;\n  width: 320px;\n  background: rgba(255, 255, 255, 0.98);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(212, 175, 55, 0.15);\n}\n\n.settings-panel h3 {\n  color: #333;\n  font-size: 16px;\n  margin: 15px 0 10px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(212, 175, 55, 0.2);\n  position: relative;\n}\n\n.settings-panel h3:first-child {\n  margin-top: 0;\n}\n\n.settings-panel h3::after {\n  content: '';\n  position: absolute;\n  bottom: -1px;\n  left: 0;\n  width: 50px;\n  height: 2px;\n  background: linear-gradient(90deg, #D4AF37, transparent);\n}\n\n.setting-item {\n  margin: 12px 0;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px;\n  border-radius: 8px;\n  transition: background-color 0.3s;\n}\n\n.setting-item:hover {\n  background: rgba(212, 175, 55, 0.05);\n}\n\n.setting-item label {\n  width: 45px;\n  font-size: 14px;\n  color: #666;\n}\n\n.setting-item input[type=\"range\"] {\n  flex: 1;\n  height: 4px;\n  background: #e0e0e0;\n  border-radius: 2px;\n  -webkit-appearance: none;\n  cursor: pointer;\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 12px;\n  height: 12px;\n  background: #D4AF37;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb:hover {\n  transform: scale(1.2);\n}\n\n.setting-item input[type=\"range\"]::-webkit-slider-thumb:focus {\n  outline: none;\n  border-color: #D4AF37;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.setting-item select {\n  flex: 1;\n  padding: 6px 10px;\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  font-size: 14px;\n  color: #333;\n  background: #fff;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.setting-item select:hover {\n  border-color: #D4AF37;\n}\n\n.setting-item select:focus {\n  outline: none;\n  border-color: #D4AF37;\n  box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.1);\n}\n\n.setting-item span {\n  min-width: 40px;\n  text-align: right;\n  font-size: 13px;\n  color: #666;\n}\n\n.control-buttons {\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid rgba(212, 175, 55, 0.1);\n  display: flex;\n  gap: 10px;\n}\n\n.control-btn {\n  flex: 1;\n  padding: 8px 15px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n  background: linear-gradient(135deg, #D4AF37 0%, #B8960C 100%);\n  color: white;\n  box-shadow: 0 2px 6px rgba(212, 175, 55, 0.2);\n}\n\n.control-btn:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(212, 175, 55, 0.3);\n}\n\n.message-ai-container {\n  width: 100%;\n  margin-right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n}\n\n.close-button {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: none;\n  border: none;\n  font-size: 20px;\n  cursor: pointer;\n  color: #333;\n  transition: color 0.3s ease;\n}\n\n.close-button:hover {\n  color: #D4AF37;\n}\n\n@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500&display=swap');\n\n.welcome-banner {\n  background: linear-gradient(to bottom, #fdf6e3, #f4e9d8);\n  /* 仿古纸渐变背景 */\n  color: #5b3a29;\n  /* 深棕色字体 */\n  font-size: 20px;\n  font-family: 'Noto Serif SC', serif;\n  /* 采用宋体或楷书风格 */\n  font-weight: bold;\n  text-align: center;\n  padding: 15px 30px;\n  margin: 20px auto;\n  max-width: 600px;\n  border: 4px solid #c4a484;\n  /* 仿竹简边框 */\n  border-radius: 10px;\n  box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.15);\n  /* 轻微阴影 */\n  position: relative;\n}\n\n.welcome-banner::before,\n.welcome-banner::after {\n  content: \"\";\n  position: absolute;\n  width: 40px;\n  height: 40px;\n  background-color: #c4a484;\n  border-radius: 50%;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.welcome-banner::before {\n  left: -20px;\n}\n\n.welcome-banner::after {\n  right: -20px;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  backdrop-filter: blur(5px);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 5px solid #f3f3f3;\n  border-top: 5px solid #D4AF37;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.hidden {\n  display: none !important;\n}\n\n@keyframes recording-pulse {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.2);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n\n.recording {\n  animation: recording-pulse 1s infinite;\n  filter: invert(48%) sepia(79%) saturate(2476%) hue-rotate(330deg) !important;\n}\n\n:deep(.welcome-message) {\n  margin: 60px auto;\n  width: 90%;\n  max-width: 900px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n:deep(.welcome-inner) {\n  background: linear-gradient(135deg, rgba(255, 250, 240, 0.98), rgba(252, 248, 240, 0.95));\n  border-radius: 16px;\n  padding: 40px 50px;\n  text-align: center;\n  width: 100%;\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(212, 175, 55, 0.25);\n  position: relative;\n  overflow: auto;\n}\n\n:deep(.welcome-inner::before) {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.8), transparent);\n}\n\n:deep(.welcome-title) {\n  font-size: 46px;\n  color: #B8860B;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  font-weight: bold;\n  letter-spacing: 8px;\n  margin-bottom: 20px;\n  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);\n  animation: fadeInDown 1.2s ease-out;\n  text-align: center;\n}\n\n:deep(.welcome-subtitle) {\n  font-size: 24px;\n  color: #D4AF37;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  letter-spacing: 5px;\n  margin-bottom: 30px;\n  opacity: 0.9;\n  animation: fadeInUp 1.2s ease-out 0.3s both;\n  text-align: center;\n}\n\n:deep(.welcome-content) {\n  font-size: 28px;\n  color: #8B4513;\n  line-height: 1.6;\n  margin: 30px 0;\n  font-family: \"楷体\", \"KaiTi\", serif;\n  animation: fadeIn 1.2s ease-out 0.6s both;\n  text-align: center;\n  display: block;\n  width: 100%;\n}\n\n:deep(.quote-left),\n:deep(.quote-right) {\n  color: #D4AF37;\n  font-size: 24px;\n  vertical-align: middle;\n  margin: 0 4px;\n  opacity: 0.8;\n}\n\n:deep(.welcome-decoration) {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 20px;\n  color: #D4AF37;\n  animation: fadeIn 1.2s ease-out 0.9s both;\n}\n\n:deep(.welcome-decoration .line) {\n  font-size: 12px;\n  opacity: 0.5;\n}\n\n:deep(.welcome-decoration .flower) {\n  font-size: 18px;\n  opacity: 0.9;\n  animation: float 3s ease-in-out infinite;\n}\n\n@keyframes fadeInDown {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  to {\n    opacity: 0.9;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes float {\n\n  0%,\n  100% {\n    transform: translateY(0);\n  }\n\n  50% {\n    transform: translateY(-6px);\n  }\n}\n\n/* 滚动条样式优化 */\n.chat-container::-webkit-scrollbar {\n  width: 8px;\n}\n\n.chat-container::-webkit-scrollbar-track {\n  background: rgba(241, 241, 241, 0.5);\n  border-radius: 4px;\n}\n\n.chat-container::-webkit-scrollbar-thumb {\n  background: linear-gradient(to bottom, #D4AF37, #B8960C);\n  border-radius: 4px;\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n\n.chat-container::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(to bottom, #B8960C, #9A7B0A);\n  border: 2px solid transparent;\n  background-clip: padding-box;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}